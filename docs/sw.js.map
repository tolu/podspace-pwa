{"version":3,"file":"sw.js","sources":["../src/sw.ts"],"sourcesContent":["importScripts(\"https://storage.googleapis.com/workbox-cdn/releases/3.2.0/workbox-sw.js\");\n\nif (workbox) {\n  console.log(`Yay! Workbox is loaded ðŸŽ‰`);\n  // workbox.core.LOG_LEVELS: {debug: 0, log: 1, warn: 2, error: 3, silent: 4}\n  workbox.core.setLogLevel(workbox.core.LOG_LEVELS.silent);\n} else {\n  console.log(`Boo! Workbox didn't load ðŸ˜¬`);\n}\n\n/*\nconst request = new Request('https://third-party-no-cors.com/', { mode: 'no-cors' });\nfetch(request).then(response => cache.put(request, response));\n*/\n\n/* Static file cache */\n// Root html\nworkbox.routing.registerRoute(\n  /^(\\/podspace-pwa)?\\/$/,\n  workbox.strategies.networkFirst({\n    cacheName: \"static-resources\",\n  }),\n);\n// Static files\nworkbox.routing.registerRoute(\n  /.*\\.(js|css)/,\n  workbox.strategies.networkFirst({\n    cacheName: \"static-resources\",\n  }),\n);\n// Image cache\nworkbox.routing.registerRoute(\n  ({url}: {url: URL}) => {\n    // Return true if the route should match\n    return /\\.(?:png|gif|jpg|jpeg|svg)$/.test(url.pathname);\n  },\n  workbox.strategies.cacheFirst({\n    cacheName: \"images\",\n    plugins: [\n      new workbox.expiration.Plugin({\n        maxEntries: 60,\n        maxAgeSeconds: 30 * 24 * 60 * 60, // 30 Days\n      }),\n      new workbox.cacheableResponse.Plugin({\n        statuses: [0, 200],\n      }),\n    ],\n  }),\n);\n\n/* MP3 Cache */\nworkbox.routing.registerRoute(\n  ({url}: {url: URL}) => {\n    // Return true if the route should match\n    const isMp3 = /\\.(?:mp3)$/.test(url.pathname);\n    const offline = /podspace-offline/.test(url.search);\n    if (isMp3 && offline) {\n      console.log(\"offline mp3\", url.toString());\n    }\n    return isMp3 && offline;\n  },\n  workbox.strategies.cacheFirst({\n    cacheName: \"audio\",\n    plugins: [\n      new workbox.expiration.Plugin({\n        maxEntries: 20,\n        maxAgeSeconds: 30 * 24 * 60 * 60, // 30 Days\n      }),\n      new workbox.cacheableResponse.Plugin({\n        statuses: [0, 200],\n      }),\n    ],\n  }),\n);\n"],"names":[],"mappings":";AAAA,aAAa,CAAC,yEAAyE,CAAC,CAAC;AAEzF,IAAI,OAAO,EAAE;IACX,OAAO,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;;IAEzC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;CAC1D;KAAM;IACL,OAAO,CAAC,GAAG,CAAC,6BAA6B,CAAC,CAAC;CAC5C;;;;;;;AASD,OAAO,CAAC,OAAO,CAAC,aAAa,CAC3B,uBAAuB,EACvB,OAAO,CAAC,UAAU,CAAC,YAAY,CAAC;IAC9B,SAAS,EAAE,kBAAkB;CAC9B,CAAC,CACH,CAAC;;AAEF,OAAO,CAAC,OAAO,CAAC,aAAa,CAC3B,cAAc,EACd,OAAO,CAAC,UAAU,CAAC,YAAY,CAAC;IAC9B,SAAS,EAAE,kBAAkB;CAC9B,CAAC,CACH,CAAC;;AAEF,OAAO,CAAC,OAAO,CAAC,aAAa,CAC3B,CAAC,EAAC,GAAG,EAAa;;IAEhB,OAAO,6BAA6B,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;CACzD,EACD,OAAO,CAAC,UAAU,CAAC,UAAU,CAAC;IAC5B,SAAS,EAAE,QAAQ;IACnB,OAAO,EAAE;QACP,IAAI,OAAO,CAAC,UAAU,CAAC,MAAM,CAAC;YAC5B,UAAU,EAAE,EAAE;YACd,aAAa,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;SACjC,CAAC;QACF,IAAI,OAAO,CAAC,iBAAiB,CAAC,MAAM,CAAC;YACnC,QAAQ,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC;SACnB,CAAC;KACH;CACF,CAAC,CACH,CAAC;;AAGF,OAAO,CAAC,OAAO,CAAC,aAAa,CAC3B,CAAC,EAAC,GAAG,EAAa;;IAEhB,MAAM,KAAK,GAAG,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;IAC9C,MAAM,OAAO,GAAG,kBAAkB,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IACpD,IAAI,KAAK,IAAI,OAAO,EAAE;QACpB,OAAO,CAAC,GAAG,CAAC,aAAa,EAAE,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC;KAC5C;IACD,OAAO,KAAK,IAAI,OAAO,CAAC;CACzB,EACD,OAAO,CAAC,UAAU,CAAC,UAAU,CAAC;IAC5B,SAAS,EAAE,OAAO;IAClB,OAAO,EAAE;QACP,IAAI,OAAO,CAAC,UAAU,CAAC,MAAM,CAAC;YAC5B,UAAU,EAAE,EAAE;YACd,aAAa,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE;SACjC,CAAC;QACF,IAAI,OAAO,CAAC,iBAAiB,CAAC,MAAM,CAAC;YACnC,QAAQ,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC;SACnB,CAAC;KACH;CACF,CAAC,CACH,CAAC"}